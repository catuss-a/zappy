/*
** sock_watch_fd.c for libsock in /home/lamais_g//Projects/SystemUnix/libsock
** 
** Made by gauthier lamaison
** Login   <lamais_g@epitech.net>
** 
** Started on  Thu Jun  9 23:06:37 2011 gauthier lamaison
** Last update Thu Jun 23 17:01:16 2011 gauthier lamaison
*/

#include <strings.h>
#include "libsock.h"
#include "private_libsock.h"

extern t_sockserver	*g_server;

int			sock_add_fd(int sock, int mod)
{
  struct epoll_event	event;

  bzero(&event, sizeof(event));
  event.data.fd = sock;
  event.events = mod;
  if (epoll_ctl(g_server->epoll.efd, EPOLL_CTL_ADD, sock, &event) == -1)
    return (raise_error("epoll_ctl", -1));
  return (0);
}
